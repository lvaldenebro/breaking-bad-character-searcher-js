"use strict";const input=document.querySelector(".js-input"),button=document.querySelector(".js-button"),section2=document.querySelector(".js-section2"),section1=document.querySelector(".js-section1");let charactersList=[],characterFavorites=[];function returnServerInfo(){fetch("./assets/data/data.json").then((function(e){return e.json()})).then((function(e){charactersList=e.slice(0,20),renderHTMLCards(charactersList)}))}const savedCharacters=JSON.parse(localStorage.getItem("characterFavorites"));function matchCharacter(){const e=input.value.toLowerCase();renderHTMLCards(charactersList.filter(t=>t.name.toLowerCase().includes(e)))}function handleButtonClick(e){e.preventDefault(),matchCharacter()}function createNode(e){const t=characterFavorites.findIndex(t=>t.char_id===e.char_id),r=document.createElement("article"),a=document.createElement("img"),c=document.createElement("h4"),n=document.createElement("p");-1!==t&&r.classList.add("favorite"),r.classList.add("js-bb-character","main_section2_article"),a.classList.add("main_section2_article_img"),c.classList.add("main_section2_article_h4"),n.classList.add("main_section2_article_p"),r.setAttribute("id",e.char_id),a.src=e.img;const i=document.createTextNode(e.name),s=document.createTextNode(e.status);return c.appendChild(i),n.appendChild(s),r.appendChild(a),r.appendChild(c),r.appendChild(n),r}function renderHTMLCards(e){for(;section2.firstChild;)section2.removeChild(section2.lastChild);const t=document.createElement("h3");t.classList.add("main_section2_title","main_title");const r=document.createTextNode("Characters❤️");t.appendChild(r),section2.appendChild(t);for(let t of e){const e=createNode(t);section2.appendChild(e),e.addEventListener("click",handleArticleClick)}}function deleteFavoriteCard(e){const t=characterFavorites.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));characterFavorites.splice(t,1),localStorage.setItem("characterFavorites",JSON.stringify(characterFavorites)),renderFavoriteCharacters(),renderHTMLCards(charactersList)}function handleDeleteSelector(e){e.preventDefault(),deleteFavoriteCard(e)}function renderFavoriteCharacters(){for(;section1.firstChild;)section1.removeChild(section1.lastChild);const e=document.createElement("h3");e.classList.add("main_section1_title","main_title");const t=document.createTextNode("Favorites❤️");e.appendChild(t),section1.appendChild(e);for(let e of characterFavorites){const t=createNode(e),r=document.createElement("p");r.classList.add("main_section2_article_selector","js-delete-selector");const a=document.createTextNode("x");r.appendChild(a),t.appendChild(r),section1.appendChild(t),r.addEventListener("click",handleDeleteSelector)}}function favoriteCharacters(e){e.currentTarget.classList.toggle("favorite");const t=charactersList.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=characterFavorites.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));-1===r?characterFavorites.push(t):characterFavorites.splice(r,1),localStorage.setItem("characterFavorites",JSON.stringify(characterFavorites)),renderFavoriteCharacters()}function handleArticleClick(e){e.preventDefault(),favoriteCharacters(e)}null!==savedCharacters&&(characterFavorites=savedCharacters,renderFavoriteCharacters(),renderHTMLCards(charactersList)),returnServerInfo(),button.addEventListener("click",handleButtonClick),renderHTMLCards(charactersList);